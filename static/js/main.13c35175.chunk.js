(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{236:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(25),s=n.n(a),i=n(9),o=n(8),u=n(103),d=n(7),l=n(12),j=n(16),m=n.n(j),b=n(6),h=n(29),O="SIGN_IN",f="SIGN_OUT",p="CREATE_STREAM",x="FETCH_STREAMS",v="FETCH_STREAM",S="DELETE_STREAM",y="EDIT_STREAM",N=n(99),g=n.n(N).a.create({baseURL:"https://my-json-server.typicode.com/jimmytan123/apiDemo"}),E=n(11),w=Object(E.a)({basename:"streamsDemo"}),I=function(e){return function(){var t=Object(h.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.get("/streams/".concat(e));case 2:r=t.sent,n({type:v,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=n(238),_=n(237),D=n(1),k=function(e){var t=e.error;if(e.touched&&t)return Object(D.jsx)("div",{className:"ui error message",children:Object(D.jsx)("div",{className:"header",children:t})})},C=function(e){var t=e.input,n=e.label,r=e.meta,c="field ".concat(r.error&&r.touched?"error":"");return Object(D.jsxs)("div",{className:c,children:[Object(D.jsx)("label",{children:n}),Object(D.jsx)("input",Object(b.a)(Object(b.a)({},t),{},{autoComplete:"off"})),k(r)]})},A=Object(_.a)({form:"streamForm",validate:function(e){var t={};return e.title||(t.title="You must enter a title"),e.description||(t.description="You must enter a description"),t}})((function(e){var t=e.handleSubmit,n=e.onSubmit;return Object(D.jsxs)("form",{className:"ui form error",onSubmit:t((function(e){n(e)})),children:[Object(D.jsx)(T.a,{name:"title",component:C,type:"text",label:"Enter Title"}),Object(D.jsx)(T.a,{name:"description",component:C,type:"text",label:"Enter Description"}),Object(D.jsx)("button",{className:"ui button primary",children:"Submit"})]})})),R=Object(i.b)(null,{createStream:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(n,r){var c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r().auth.userId,t.next=3,g.post("/streams",Object(b.a)(Object(b.a)({},e),{},{userId:c}));case 3:a=t.sent,n({type:p,payload:a.data}),w.push("/");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})((function(e){var t=e.createStream;return Object(D.jsxs)("div",{children:[Object(D.jsx)("h3",{children:"Create a Stream"}),Object(D.jsx)(A,{onSubmit:function(e){t(e)}})]})})),F=n(36),M=n.n(F),L=Object(i.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:I,editStream:function(e,t){return function(){var n=Object(h.a)(m.a.mark((function n(r){var c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.patch("/streams/".concat(e),t);case 2:c=n.sent,r({type:y,payload:c.data}),w.push("/");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.fetchStream,n=e.editStream,c=e.stream,a=Object(d.f)().id;Object(r.useEffect)((function(){t(a)}),[t,a]);return Object(D.jsx)(D.Fragment,{children:c?Object(D.jsxs)("div",{children:[Object(D.jsx)("h3",{children:"Edit a Stream"}),Object(D.jsx)(A,{onSubmit:function(e){n(a,e)},initialValues:M.a.pick(c,"title","description")})]}):Object(D.jsx)("div",{children:"Loading..."})})})),U=function(e){var t=e.title,n=e.content,r=e.actions,c=e.onDismiss;return s.a.createPortal(Object(D.jsx)("div",{onClick:c,className:"ui dimmer modals visiable active",children:Object(D.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"ui standard modal visiable active",children:[Object(D.jsx)("div",{className:"header",children:t}),Object(D.jsx)("div",{className:"content",children:n}),Object(D.jsx)("div",{className:"actions",children:r})]})}),document.querySelector("#modal"))},P=Object(i.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:I,deleteStream:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.delete("/streams/".concat(e));case 2:n({type:S,payload:e}),w.push("/");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.fetchStream,n=e.deleteStream,a=e.stream,s=Object(d.f)().id;Object(r.useEffect)((function(){t(s)}),[t,s]);return Object(D.jsx)(U,{title:"Delete Stream",content:a?"Are you sure you want to delete the stream with title: ".concat(a.title,"?"):"Are you sure you want to delete this steam?",actions:Object(D.jsxs)(c.a.Fragment,{children:[Object(D.jsx)("button",{onClick:function(){return n(s)},className:"ui button negative",children:"Delete"}),Object(D.jsx)(l.b,{to:"/",className:"ui button",children:"Cancel"})]}),onDismiss:function(){return w.push("/")}})})),q=Object(i.b)((function(e){return{streams:Object.values(e.streams),currentUserId:e.auth.userId,isSignedIn:e.auth.isSignedIn}}),{fetchStreams:function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/streams");case 2:n=e.sent,t({type:x,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.fetchStreams,n=e.streams,c=e.currentUserId,a=e.isSignedIn;Object(r.useEffect)((function(){t()}),[t]);var s=function(e){if(e.userId===c)return Object(D.jsxs)("div",{className:"right floated content",children:[Object(D.jsx)(l.b,{to:"/streams/edit/".concat(e.id),className:"ui button primary",children:"Edit"}),Object(D.jsx)(l.b,{to:"/streams/delete/".concat(e.id),className:"ui button negative",children:"Delete"})]})};return Object(D.jsxs)("div",{children:[Object(D.jsx)("h2",{children:"Streams"}),Object(D.jsx)("div",{className:"ui celled list",children:n.map((function(e){return Object(D.jsxs)("div",{className:"item",children:[s(e),Object(D.jsx)("i",{className:"large middle aligned icon camera"}),Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)(l.b,{to:"/streams/show/".concat(e.id),className:"header",children:e.title}),Object(D.jsx)("div",{className:"description",children:e.description})]})]},e.id)}))}),function(){if(a)return Object(D.jsx)("div",{style:{textAlign:"right"},children:Object(D.jsx)(l.b,{to:"/streams/new",className:"ui button primary",children:"Create Stream"})})}()]})})),G=Object(i.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:I})((function(e){var t=e.fetchStream,n=e.stream,c=Object(d.f)().id;return Object(r.useEffect)((function(){t(c)}),[t,c]),Object(D.jsx)(D.Fragment,{children:n?Object(D.jsxs)("div",{children:[Object(D.jsx)("h1",{children:n.title}),Object(D.jsx)("h5",{children:n.description})]}):Object(D.jsx)("div",{children:"Loading..."})})})),H=function(){return Object(D.jsxs)("div",{className:"ui secondary pointing menu",children:[Object(D.jsxs)(l.b,{to:"/",className:"item",children:[" ","Streamer"," "]}),Object(D.jsx)("div",{className:"right menu",children:Object(D.jsx)(l.b,{to:"/",className:"item",children:"All Streams"})})]})},J=function(){return Object(D.jsx)("div",{className:"ui container",children:Object(D.jsx)(d.b,{history:w,children:Object(D.jsx)(l.a,{children:Object(D.jsxs)("div",{children:[Object(D.jsx)(H,{}),Object(D.jsxs)(d.c,{children:[Object(D.jsx)(d.a,{path:"/",exact:!0,component:q}),Object(D.jsx)(d.a,{path:"/streams/new",component:R}),Object(D.jsx)(d.a,{path:"/streams/edit/:id",component:L}),Object(D.jsx)(d.a,{path:"/streams/delete/:id",component:P}),Object(D.jsx)(d.a,{path:"/streams/show/:id",component:G})]})]})})})})},V=n(239),X={isSignedIn:null,userId:null},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(b.a)(Object(b.a)({},e),{},{isSignedIn:!0,userId:t.payload});case f:return Object(b.a)(Object(b.a)({},e),{},{isSignedIn:!1,userId:null});default:return e}},K=n(28),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(b.a)(Object(b.a)({},e),M.a.mapKeys(t.payload,"id"));case v:case p:case y:return Object(b.a)(Object(b.a)({},e),{},Object(K.a)({},t.payload.id,t.payload));case S:return M.a.omit(e,t.payload);default:return e}},B=Object(o.c)({auth:Y,form:V.a,streams:z}),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,W=Object(o.e)(B,Q(Object(o.a)(u.a)));s.a.render(Object(D.jsxs)(i.a,{store:W,children:[" ",Object(D.jsx)(J,{})]}),document.querySelector("#root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.13c35175.chunk.js.map