(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{236:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),s=n.n(c),i=n(9),o=n(8),u=n(103),d=n(7),l=n(16),j=n.n(l),m=n(6),b=n(29),h="SIGN_IN",O="SIGN_OUT",f="CREATE_STREAM",p="FETCH_STREAMS",x="FETCH_STREAM",v="DELETE_STREAM",S="EDIT_STREAM",y=n(99),N=n.n(y).a.create({baseURL:"https://my-json-server.typicode.com/jimmytan123/apiDemo"}),g=n(11),E=Object(g.a)({basename:"streamsDemo"}),w=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("/streams/".concat(e));case 2:a=t.sent,n({type:x,payload:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=n(238),T=n(237),_=n(1),D=function(e){var t=e.error;if(e.touched&&t)return Object(_.jsx)("div",{className:"ui error message",children:Object(_.jsx)("div",{className:"header",children:t})})},k=function(e){var t=e.input,n=e.label,a=e.meta,r="field ".concat(a.error&&a.touched?"error":"");return Object(_.jsxs)("div",{className:r,children:[Object(_.jsx)("label",{children:n}),Object(_.jsx)("input",Object(m.a)(Object(m.a)({},t),{},{autoComplete:"off"})),D(a)]})},C=Object(T.a)({form:"streamForm",validate:function(e){var t={};return e.title||(t.title="You must enter a title"),e.description||(t.description="You must enter a description"),t}})((function(e){var t=e.handleSubmit,n=e.onSubmit;return Object(_.jsxs)("form",{className:"ui form error",onSubmit:t((function(e){n(e)})),children:[Object(_.jsx)(I.a,{name:"title",component:k,type:"text",label:"Enter Title"}),Object(_.jsx)(I.a,{name:"description",component:k,type:"text",label:"Enter Description"}),Object(_.jsx)("button",{className:"ui button primary",children:"Submit"})]})})),A=Object(i.b)(null,{createStream:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,a){var r,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.userId,t.next=3,N.post("/streams",Object(m.a)(Object(m.a)({},e),{},{userId:r}));case 3:c=t.sent,n({type:f,payload:c.data}),E.push("/");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})((function(e){var t=e.createStream;return Object(_.jsxs)("div",{children:[Object(_.jsx)("h3",{children:"Create a Stream"}),Object(_.jsx)(C,{onSubmit:function(e){t(e)}})]})})),R=n(36),F=n.n(R),M=Object(i.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:w,editStream:function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(a){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.patch("/streams/".concat(e),t);case 2:r=n.sent,a({type:S,payload:r.data}),E.push("/");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.fetchStream,n=e.editStream,r=e.stream,c=Object(d.f)().id;Object(a.useEffect)((function(){t(c)}),[t,c]);return Object(_.jsx)(_.Fragment,{children:r?Object(_.jsxs)("div",{children:[Object(_.jsx)("h3",{children:"Edit a Stream"}),Object(_.jsx)(C,{onSubmit:function(e){n(c,e)},initialValues:F.a.pick(r,"title","description")})]}):Object(_.jsx)("div",{children:"Loading..."})})})),L=function(e){var t=e.title,n=e.content,a=e.actions,r=e.onDismiss;return s.a.createPortal(Object(_.jsx)("div",{onClick:r,className:"ui dimmer modals visiable active",children:Object(_.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"ui standard modal visiable active",children:[Object(_.jsx)("div",{className:"header",children:t}),Object(_.jsx)("div",{className:"content",children:n}),Object(_.jsx)("div",{className:"actions",children:a})]})}),document.querySelector("#modal"))},U=n(13),P=Object(i.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:w,deleteStream:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.delete("/streams/".concat(e));case 2:n({type:v,payload:e}),E.push("/");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.fetchStream,n=e.deleteStream,c=e.stream,s=Object(d.f)().id;Object(a.useEffect)((function(){t(s)}),[t,s]);return Object(_.jsx)(L,{title:"Delete Stream",content:c?"Are you sure you want to delete the stream with title: ".concat(c.title,"?"):"Are you sure you want to delete this steam?",actions:Object(_.jsxs)(r.a.Fragment,{children:[Object(_.jsx)("button",{onClick:function(){return n(s)},className:"ui button negative",children:"Delete"}),Object(_.jsx)(U.a,{to:"/",className:"ui button",children:"Cancel"})]}),onDismiss:function(){return E.push("/")}})})),q=Object(i.b)((function(e){return{streams:Object.values(e.streams),currentUserId:e.auth.userId,isSignedIn:e.auth.isSignedIn}}),{fetchStreams:function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get("/streams");case 2:n=e.sent,t({type:p,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.fetchStreams,n=e.streams,r=e.currentUserId,c=e.isSignedIn;Object(a.useEffect)((function(){t()}),[t]);var s=function(e){if(e.userId===r)return Object(_.jsxs)("div",{className:"right floated content",children:[Object(_.jsx)(U.a,{to:"/streams/edit/".concat(e.id),className:"ui button primary",children:"Edit"}),Object(_.jsx)(U.a,{to:"/streams/delete/".concat(e.id),className:"ui button negative",children:"Delete"})]})};return Object(_.jsxs)("div",{children:[Object(_.jsx)("h2",{children:"Streams"}),Object(_.jsx)("div",{className:"ui celled list",children:n.map((function(e){return Object(_.jsxs)("div",{className:"item",children:[s(e),Object(_.jsx)("i",{className:"large middle aligned icon camera"}),Object(_.jsxs)("div",{className:"content",children:[Object(_.jsx)(U.a,{to:"/streams/show/".concat(e.id),className:"header",children:e.title}),Object(_.jsx)("div",{className:"description",children:e.description})]})]},e.id)}))}),function(){if(c)return Object(_.jsx)("div",{style:{textAlign:"right"},children:Object(_.jsx)(U.a,{to:"/streams/new",className:"ui button primary",children:"Create Stream"})})}()]})})),G=Object(i.b)((function(e,t){return{stream:e.streams[t.match.params.id]}}),{fetchStream:w})((function(e){var t=e.fetchStream,n=e.stream,r=Object(d.f)().id;return Object(a.useEffect)((function(){t(r)}),[t,r]),Object(_.jsx)(_.Fragment,{children:n?Object(_.jsxs)("div",{children:[Object(_.jsx)("h1",{children:n.title}),Object(_.jsx)("h5",{children:n.description})]}):Object(_.jsx)("div",{children:"Loading..."})})})),H=function(){return Object(_.jsxs)("div",{className:"ui secondary pointing menu",children:[Object(_.jsxs)(U.a,{to:"/",className:"item",children:[" ","Streamer"," "]}),Object(_.jsx)("div",{className:"right menu",children:Object(_.jsx)(U.a,{to:"/",className:"item",children:"All Streams"})})]})},J=function(){return Object(_.jsx)("div",{className:"ui container",children:Object(_.jsx)(d.b,{history:E,children:Object(_.jsxs)("div",{children:[Object(_.jsx)(H,{}),Object(_.jsxs)(d.c,{children:[Object(_.jsx)(d.a,{path:"/",exact:!0,component:q}),Object(_.jsx)(d.a,{path:"/streams/new",component:A}),Object(_.jsx)(d.a,{path:"/streams/edit/:id",component:M}),Object(_.jsx)(d.a,{path:"/streams/delete/:id",component:P}),Object(_.jsx)(d.a,{path:"/streams/show/:id",component:G})]})]})})})},V=n(239),X={isSignedIn:null,userId:null},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(m.a)(Object(m.a)({},e),{},{isSignedIn:!0,userId:t.payload});case O:return Object(m.a)(Object(m.a)({},e),{},{isSignedIn:!1,userId:null});default:return e}},K=n(28),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(m.a)(Object(m.a)({},e),F.a.mapKeys(t.payload,"id"));case x:case f:case S:return Object(m.a)(Object(m.a)({},e),{},Object(K.a)({},t.payload.id,t.payload));case v:return F.a.omit(e,t.payload);default:return e}},B=Object(o.c)({auth:Y,form:V.a,streams:z}),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,W=Object(o.e)(B,Q(Object(o.a)(u.a)));s.a.render(Object(_.jsxs)(i.a,{store:W,children:[" ",Object(_.jsx)(J,{})]}),document.querySelector("#root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.95e6f934.chunk.js.map